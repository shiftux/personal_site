<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <!-- for mobile sites -->
	<title>Welcome to Sandro's site</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
	<link href="../stylesheets/style.css" rel="stylesheet">
    <link href="../stylesheets/blog_style.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Roboto:500" rel="stylesheet" type="text/css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-179255623-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'UA-179255623-1');
    </script>
    <!-- Hotjar Tracking Code for sandromontanari.com -->
	<script>
		(function(h,o,t,j,a,r){
			h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
			h._hjSettings={hjid:2016932,hjsv:6};
			a=o.getElementsByTagName('head')[0];
			r=o.createElement('script');r.async=1;
			r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
			a.appendChild(r);
		})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
	</script>
</head>
<body data-spy="scroll" data-target=".navbar" data-offset="50">

<section id="navbarSection" style="padding-bottom: 100px;"></section>

<section id="introImageSection">
    <div id="introCarousel" class="carousel slide" data-ride="carousel">
        <ul class="carousel-indicators">
            <li data-target="#introCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#introCarousel" data-slide-to="1"></li>
            <li data-target="#introCarousel" data-slide-to="2"></li>
        </ul>
        <div class="carousel-inner active">
            <div class="carousel-item active">
                <img src="../images/keyboard_carousel_1.jpg">
            </div>
            <div class="carousel-item">
                <img src="../images/keyboard_carousel_2.jpg">
            </div>
            <div class="carousel-item">
                <img src="../images/keyboard_carousel_3.png">
            </div>
        </div>
        <a class="carousel-control carousel-control-prev" href="#introCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control carousel-control-next" href="#introCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</section>

<section class="blue-text view-width">
    <div class="container-fluid padding blue-text">
		<div class="row text-center">
			<div class="col-12 heading-row">
				<h1 class="heading">Building a customized ergonomic split keyboard</h1>
			</div>
		</div>
    </div>
    <p><small>Published September 2020</small></p>
    <h4>Motivation</h4>
    <p>
        When you're working in IT the keyboard is <i>the thing</i> you spend most of your time with. Having one of your very own, that you build and customized for your personal needs, feels natural. Additionally it's a cool project involving electronics, programming and CAD design and makes for a great occupation during Covid times (which, to be brutally honest, was the main motivation).
    </p>
    <h4>The keyboard</h4>
    <p>Who knows how many keyboards are out there?! A BIG number... So which type do you want to go for? A coworker raised the question on our random Slack channel and mentioned a couple of ergonomic keyboards, amongst them there was the <a href="https://github.com/abstracthat/dactyl-manuform">Dactyl-Manuform</a>. It's an open-source project of an ergonomic split keyboard. I liked the design and the open source approach and read good things about it. So I decided to go for that. In retrospect that decision was taken a bit over eagerly, I should have tested it out further before settling on one, because let me assure you that ergonomic split keyboards are a BIG change compared to what you're used to.<br>
    But let's have a look at how it's built and then look at the <a href="#conclusion">conclusion and lessons learned</a> at the end.</p>
    <div class="row">
        <div class="col-sm-12 text-center">
            <img src="../images/keyboard_custom_arrows.jpg" width="100%">
            <p class="caption">My customizations to the keyboard.</p>
        </div>
    </div>
    <h4>The Build</h4>
    <b>Research and selection</b><br>
    <p>
        Do your research. Make sure you know what type of keyboard you feel comfortable with and what is important to you.<br><br>
        The next thing you need to find out is what types of keys (switches) you want to use. There are a couple of brands and all have different types of keys, some harder, some softer to the touch, some with mechanical feedback, some without, some "clicky" (noisy), some not... You won't know what feels good until you tried. I bought a <a href="https://www.amazon.com/Cherry-Switch-Tester-keyboard-Sampler/dp/B01GZHU1EG/ref=sr_1_1?dchild=1&keywords=AKWOX+key+tester&qid=1600942315&sr=8-1">key tester</a> and an additional <a href="https://www.pcgamingrace.com/products/glorious-mx-switch-sample-pack">set of trial keys</a> to test them. Not an easy task, I changed my mind a couple of times over in the process and had other people try it all out. In the end I chose the <a href="https://www.digitec.ch/de/s1/product/glorious-pc-gaming-race-kailh-pro-purple-switches-120-stueck-maus-tastatur-zubehoer-12826227">Kailh Purple Switches</a>. When in doubt I could also recommend the Cherry MX Red, which are always a safe choice (but also way too mainstream ;).
    </p>
    <div class="row">
        <div class="col-sm-12 text-center">
            <img src="../images/keyboard_key_testing.jpg" width="100%">
            <p class="caption">Testing out which keys feel best.</p>
        </div>
    </div>
    <b>CAD</b><br>
    <p>
        The Dactly-Manuform has open source <a href="http://www.openscad.org/">OpenSCAD</a> files that allow you to adapt the keyboard to your liking. It makes it easy for you to change the ergonomic parameters, such as curvature and height, but also allows you to customize your build to your liking. Me I knew I wanted to add multimedia control keys, a volume knob and a scroll knob. I had to read a bit about Clojure, but the learning is pretty straight forward and you can basically get the job done by looking at the existing code and copy-pasting plus adapting some parts. Additionally I change the screw inserts and the connectors. Typical 3M screw inserts are pretty hard to find so I changed the insert holes to hexagonal holes which hold M3 nuts. They need to be glued rather than just fitted but I have tons of them and they are more convenient in my opinion. Also RJ9 cables and female plugs are hard to find so I changed those to use TRS mini-jack connectors.
    </p>
    <div class="row">
        <div class="col-md-6 text-center">
            <img src="../images/keyboard_openscad.png" width="100%">
            <p class="caption">The CAD model.</p>
        </div>
        <div class="col-md-6 text-center">
            <img src="../images/keyboard_multimedia_buttons.jpg" width="100%">
            <p class="caption">My custom multimedia keys.</p>
        </div>
    </div>
    <b>Printing</b><br>
    <p>
        Once you are happy with your CAD files go ahead and print the base of your keyboard. This takes a while, they're relatively big parts for printers to handle. Since they are hollow inside I printed with support, which takes a little extra time as well. For a nicer finish, after printing you can sand down your parts and then paint them. I didn't because I printed multimedia logos on my case and didn't want those to get sanded away.
    </p>
    <div class="row">
        <div class="col-sm-12 text-center">
            <img src="../images/keyboard_connectors.jpg" width="100%">
            <p class="caption">The connectors: a TRS mini-jack to connect the two split sides and a single micro-USB cable for power and to transmit data.</p>
        </div>
    </div>
    <b>Soldering</b><br>
    <p>
        Clearly the most tricky part of it all (but that might just be me, my soldering skills are mediocre). Basically a keyboard can be considered as a matrix of rows and columns, the switches are the elements in the matrix. Let's say switch "1" is on row 1, column 1, "w" is on row 2, column 2, etc. Pressing a switch will connect a row and column and that's how the microcontroller will know what key was pressed. Additionally diodes are added to every switch so that you can press 2 keys at the same time and it remains a unique detectable combination. All keys need 2 connections, diodes and microcontroller connections, for 64 keys you solder 216 connections, not counting the multimedia and mini-jack connectors. I used strips of copper tape to connect the columns (less soldering) and prototyping board to help connecting the rows. This setup worked well and I ended up with stable connections. Just make sure to isolate the rows from the columns in order not to have ghost typing.
    </p>
    <div class="row">
        <div class="col-sm-12 text-center">
            <img src="../images/keyboard_soldering.jpg" width="100%">
            <p class="caption">Soldering it all in place.</p>
        </div>
    </div>
    <b>Programming</b><br>
    <p>
        When selecting a microcontroller (in a split keyboard it's easiest to work with 2) make sure you select one on which the <a href="https://www.arduino.cc/reference/en/language/functions/usb/keyboard/">Arduino keyboard library</a> can run (32u4 or SAMD micro based boards), I used <a href="https://www.sparkfun.com/products/12640">Sparkun Pro Micros</a>. For the actual programming a lot of the work is already done for you in the great <a href="https://qmk.fm/">QMK project</a>. The Dactyl-Manuform is already in the library and basically all that remains to do is to program a key matrix that fits your desired layout. Just for fun you cxn trick your brxin xnd progrxm the "x" key on the "a" switch xnd then your teats look like this. Basically you have complete freedom of how your layout will look like, you'll just have to retrain your fingers to be as quick on the new layout as you were on a traditional QWERTY or QWERTZ in my case.
    </p>

    <h4>Parts and resources</h4>
    List of parts I used:
    <ul>
        <li>2 <a href="https://www.sparkfun.com/products/12640">Sparkun Pro Micros</a></li>
        <li>2 <a href="https://www.brack.ch/delock-audio-adapter-buchse-675235?query=3%2C5mm+buchse&active_search=true">3.5mm TRS mini-jacks</a></li>
        <li><a href="https://www.brack.ch/hama-audio-kabel-klinke-3-182926">Curled 3.5mm TRS mini-jack cable</a></li>
        <li>Min 64 <a href="https://www.brack.ch/velleman-dioden-k-diode1-120-stueck-108355?query=dioden&active_search=true">Diodes</a></li>
        <li>Short <a href="https://www.brack.ch/delock-usb-otg-kabel-microb-shapecable-0-15-m-526554?query=micro+usb+buchse&active_search=true
            ">micro-USB connector cable</a> to bridge the connection from the casing to the microcontroller</li>
        <li>Your preferred type of <a href="https://www.digitec.ch/de/s1/product/glorious-pc-gaming-race-kailh-pro-purple-switches-120-stueck-maus-tastatur-zubehoer-12826227">switches</a></li>
        <li>A set of keycaps, here you can use the ones from an old keyboard or go ahead and order some, for example <a href="https://www.maxkeyboard.com/">here</a></li>
        <li><a href="https://www.amazon.com/gp/product/B009KB86BU">Copper tape</a></li>
        <li>Some <a href="https://www.amazon.com/gp/product/B008CPVMMU">strip board</a></li>
        <li>A traditional USB-A to micro-USB cable (same you used to charge your older Android phones)</li>
        <li>A bunch of screws and nuts (M3)</li>
        <li>For the scroll knob and volume knob I used 2 <a href="https://www.velleman.eu/products/view/?id=439226">rotary encoders</a></li>
        <li>A couple of push buttons for the multimedia switches</li>
    </ul>
    Additionally I found a couple of resources very helpful during the process:
    <ul>
        <li>Dactly-Manuform github pages <a href="https://github.com/abstracthat/dactyl-manuform">here</a> and <a href="https://github.com/adereth/dactyl-keyboard/blob/master/guide/README.org#wiring">here</a></li>
        <li>A Dactly-Manuform forum on <a href="https://geekhack.org/index.php?topic=88576.100">Geekhack</a></li>
        <li>The <a href="https://www.reddit.com/r/MechanicalKeyboards/wiki/index#wiki_.22what_keyboard.2Fswitch_do_i_buy.3F.22">reddit mechanical keyboard wiki</a></li>
        <li>A <a href="https://medium.com/swlh/complete-idiot-guide-for-building-a-dactyl-manuform-keyboard-53454845b065">build guide on Medium</a></li>
        <li>The amazing <a href="https://qmk.fm/">QMK project</a></li>
    </ul>
    <h4 id="conclusion">Conclusion and lessons learned</h4>
    I had a ton of fun building my keyboard and it works as expected! - But I'm not using it as I thought I would. It turns out that the shape I chose for the Dactly-Manuform doesn't really go well for me... I wish I had known before... <br>
    My biggest piece of advice I can give you is to find someone with a split ergonomic keyboard and test it out. During the build process I tried to test it several times, just inserting the switches into the case to see how it all felt. But at that time I hadn't received the keycaps and didn't have an old keyboard laying around to borrow some so it felt completely different than it feels now. What particularly annoys me is that the key column for the little finger is somewhat shifted downwards, I keep missing keys and it does not feel ergonomic. When I find the courage I'll print a second try of the casing and resolder the keys, but for now I haven't worked up the courage to do all the soldering again. Still I have my own keyboard now and I love it!
</section>

<!--- Footer -->
<footer id="footer" class="blue-background"></footer>

<!--- Bootstrap scripts inclusions -->
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha384-/LjQZzcpTzaYn7qWqRIWYC5l8FWEZ2bIHIz0D73Uzba4pShEcdLdZyZkI4Kv676E" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script> <!-- for social media icons -->

<!-- include navbar -->
<script>
    window.onload = function () {
        $("#navbarSection").load("../index.html #navbarSection");
        $("#footer").load("../index.html #footer");    }
</script>

<!-- make navbar appear after scroll, and adapt for mobile -->
<script src="../javascripts/navbar_after_scroll.js"></script>

</body>
</html>
